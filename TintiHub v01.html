<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TintiHub - –•–æ—Å—Ç–∏–Ω–≥ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #7c3aed;
            --primary-dark: #5b21b6;
            --secondary: #3b82f6;
            --dark: #0f0a1e;
            --dark-2: #1a1329;
            --dark-3: #251c3a;
            --text: #e9d5ff;
            --text-secondary: #c4b5fd;
            --border: #4c1d95;
            --success: #10b981;
            --danger: #ef4444;
            --verified: #3b82f6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, var(--dark) 0%, var(--dark-2) 100%);
            color: var(--text);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* –ì–∞–ª–æ—á–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ */
        .verified-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            background: var(--verified);
            border-radius: 50%;
            color: white;
            font-size: 12px;
            margin-left: 5px;
            position: relative;
            cursor: help;
        }

        .verified-badge:hover::after {
            content: '–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç';
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark-2);
            padding: 5px 10px;
            border-radius: 5px;
            white-space: nowrap;
            font-size: 12px;
            border: 1px solid var(--border);
            z-index: 1000;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .navbar {
            background: var(--dark-2);
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .navbar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-left, .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--text);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            cursor: pointer;
        }

        .search-bar {
            background: var(--dark-3);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            width: 300px;
        }

        .search-bar input {
            background: none;
            border: none;
            color: var(--text);
            outline: none;
            width: 100%;
        }

        .search-bar input::placeholder {
            color: var(--text-secondary);
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s;
            font-size: 14px;
            cursor: pointer;
            position: relative;
        }

        .nav-link:hover {
            color: var(--text);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            font-size: 10px;
            padding: 2px 5px;
            border-radius: 10px;
        }

        .profile-pic {
            cursor: pointer;
        }

        .profile-pic img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid var(--primary);
        }

        /* Hero —Å–µ–∫—Ü–∏—è */
        .hero {
            text-align: center;
            padding: 80px 20px;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 20px;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-weight: 500;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(124, 58, 237, 0.3);
        }

        .btn-secondary {
            background: var(--dark-3);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--primary);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--dark-2);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: modalAppear 0.3s ease;
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            font-size: 24px;
        }

        .close-modal {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: var(--text);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            background: var(--dark-3);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-family: inherit;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* reCAPTCHA —Å—Ç–∏–ª—å */
        .captcha-container {
            background: var(--dark-3);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .captcha-challenge {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .captcha-question {
            font-size: 18px;
            font-weight: bold;
            color: var(--text);
        }

        .captcha-input {
            width: 80px !important;
            text-align: center;
            font-size: 18px;
        }

        .captcha-refresh {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 20px;
        }

        .slider-captcha {
            width: 100%;
            height: 40px;
            background: var(--dark-3);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .slider-button {
            position: absolute;
            left: 0;
            top: 0;
            width: 50px;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            cursor: grab;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            user-select: none;
        }

        .slider-button:active {
            cursor: grabbing;
        }

        .slider-text {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            pointer-events: none;
        }

        .slider-captcha.completed .slider-button {
            background: var(--success);
        }

        .slider-captcha.completed .slider-text {
            color: var(--success);
        }

        /* Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è */
        .email-verification {
            background: var(--dark-3);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .email-box {
            background: var(--dark-2);
            border: 1px solid var(--primary);
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            font-family: monospace;
        }

        .verification-code {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            text-align: center;
            letter-spacing: 5px;
            margin: 10px 0;
        }

        /* –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ */
        .repositories {
            padding: 40px 20px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .section-header h2 {
            font-size: 28px;
        }

        .repo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(500px, 1fr));
            gap: 20px;
        }

        .repo-card {
            background: var(--dark-2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .repo-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.2);
        }

        .repo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .repo-header h3 {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .repo-header h3 a {
            color: var(--secondary);
            text-decoration: none;
        }

        .repo-header h3 a:hover {
            text-decoration: underline;
        }

        .badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            border: 1px solid var(--success);
            color: var(--success);
            font-weight: 500;
        }

        .badge-private {
            border-color: var(--text-secondary);
            color: var(--text-secondary);
        }

        .repo-description {
            color: var(--text-secondary);
            margin-bottom: 15px;
            font-size: 14px;
        }

        .repo-stats {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: var(--text-secondary);
            flex-wrap: wrap;
        }

        .repo-stats span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .repo-owner {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .updated {
            margin-left: auto;
        }

        /* –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å */
        .activity {
            padding: 40px 20px;
        }

        .activity h2 {
            font-size: 28px;
            margin-bottom: 30px;
        }

        .activity-list {
            background: var(--dark-2);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }

        .activity-item {
            display: flex;
            gap: 15px;
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            color: var(--primary);
            font-size: 20px;
        }

        .activity-content {
            flex: 1;
        }

        .activity-content a {
            color: var(--secondary);
            text-decoration: none;
        }

        .activity-content a:hover {
            text-decoration: underline;
        }

        .time {
            color: var(--text-secondary);
            font-size: 13px;
            margin-left: 10px;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notifications-panel {
            position: absolute;
            top: 60px;
            right: 20px;
            background: var(--dark-2);
            border: 1px solid var(--border);
            border-radius: 12px;
            width: 350px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .notifications-panel.active {
            display: block;
        }

        .notification-item {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.3s;
        }

        .notification-item:hover {
            background: var(--dark-3);
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-panel {
            position: absolute;
            top: 60px;
            right: 20px;
            background: var(--dark-2);
            border: 1px solid var(--border);
            border-radius: 12px;
            width: 250px;
            display: none;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .profile-panel.active {
            display: block;
        }

        .profile-menu-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.3s;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .profile-menu-item:hover {
            background: var(--dark-3);
        }

        .profile-menu-item:last-child {
            border-bottom: none;
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è */
        .profile-page {
            padding: 40px 20px;
            display: none;
        }

        .profile-page.active {
            display: block;
        }

        .profile-header {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: start;
        }

        .profile-avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 3px solid var(--primary);
        }

        .profile-info h1 {
            font-size: 36px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .profile-bio {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .profile-stats {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .verification-status {
            display: inline-block;
            padding: 8px 16px;
            background: var(--dark-3);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
        }

        .verification-status.verified {
            border-color: var(--verified);
            color: var(--verified);
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        .settings-page {
            padding: 40px 20px;
            display: none;
        }

        .settings-page.active {
            display: block;
        }

        .settings-section {
            background: var(--dark-2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .settings-section h3 {
            margin-bottom: 20px;
        }

        .verification-request {
            background: var(--dark-3);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ */
        .auth-page {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        .auth-page.hidden {
            display: none;
        }

        .auth-container {
            background: var(--dark-2);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 40px;
            max-width: 450px;
            width: 100%;
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .auth-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .auth-tab {
            flex: 1;
            padding: 10px;
            background: var(--dark-3);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .auth-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: var(--primary);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .error-message {
            background: var(--danger);
            color: white;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .error-message.active {
            display: block;
        }

        .success-message {
            background: var(--success);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .success-message.active {
            display: block;
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è */
        .repo-page {
            display: none;
            padding: 40px 20px;
        }

        .repo-page.active {
            display: block;
        }

        .repo-page-header {
            margin-bottom: 30px;
        }

        .repo-page-title {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .repo-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .code-block {
            background: var(--dark-3);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            overflow-x: auto;
        }

        .code-block pre {
            color: var(--text);
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }

        .file-list {
            list-style: none;
        }

        .file-item {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .file-item:hover {
            background: var(--dark-2);
        }

        .commit-form {
            background: var(--dark-2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –∑–≤–µ–∑–¥–æ—á–µ–∫ */
        @keyframes twinkle {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #7c3aed;
            border-radius: 50%;
        }

        .hidden {
            display: none !important;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .repo-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-left, .nav-right {
                gap: 10px;
            }
            
            .search-bar {
                width: 150px;
            }
            
            .hero h1 {
                font-size: 32px;
            }
            
            .hero-buttons {
                flex-direction: column;
            }

            .notifications-panel,
            .profile-panel {
                right: 10px;
                width: calc(100% - 20px);
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
            }
        }

        .user-welcome {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--danger);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .repo-card:hover .delete-btn {
            opacity: 1;
        }

        .info-box {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid var(--secondary);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .info-box i {
            color: var(--secondary);
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <!-- –§–æ–Ω —Å–æ –∑–≤–µ–∑–¥–∞–º–∏ -->
    <div class="stars-container" id="starsContainer"></div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div class="auth-page" id="authPage">
        <div class="auth-container">
            <div class="auth-header">
                <h1><i class="fas fa-code-branch"></i> TintiHub</h1>
                <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</p>
            </div>

            <div class="auth-tabs">
                <div class="auth-tab active" onclick="switchAuthTab('login')">–í—Ö–æ–¥</div>
                <div class="auth-tab" onclick="switchAuthTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
            </div>

            <div class="error-message" id="authError"></div>
            <div class="success-message" id="authSuccess"></div>

            <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
            <form class="auth-form active" id="loginForm" onsubmit="login(event)">
                <div class="form-group">
                    <label>Email –∏–ª–∏ –ª–æ–≥–∏–Ω</label>
                    <input type="text" id="loginUsername" required>
                </div>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="loginPassword" required>
                </div>
                
                <!-- Slider CAPTCHA –¥–ª—è –≤—Ö–æ–¥–∞ -->
                <div class="captcha-container">
                    <div class="slider-captcha" id="loginSliderCaptcha">
                        <div class="slider-text" id="loginSliderText">–°–¥–≤–∏–Ω—å—Ç–µ –≤–ø—Ä–∞–≤–æ ‚Üí</div>
                        <div class="slider-button" id="loginSliderButton">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" id="loginSubmitBtn" style="width: 100%;" disabled>
                    <i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏
                </button>
            </form>

            <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
            <form class="auth-form" id="registerForm" onsubmit="register(event)">
                <div class="form-group">
                    <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <input type="text" id="regUsername" required minlength="3">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="regEmail" required>
                </div>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="regPassword" required minlength="6">
                </div>
                <div class="form-group">
                    <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                    <input type="password" id="regPasswordConfirm" required>
                </div>

                <!-- Math CAPTCHA –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <div class="captcha-container">
                    <div class="captcha-challenge">
                        <span class="captcha-question" id="mathQuestion">5 + 3 = ?</span>
                        <input type="number" class="captcha-input" id="mathAnswer" required>
                        <button type="button" class="captcha-refresh" onclick="generateMathCaptcha()">
                            <i class="fas fa-refresh"></i>
                        </button>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-user-plus"></i> –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ email -->
    <div class="modal" id="emailVerificationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-envelope"></i> –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ Email</h2>
            </div>

            <div class="info-box">
                <i class="fas fa-info-circle"></i>
                –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É
            </div>

            <div class="email-verification">
                <h4>üìß –í—Ö–æ–¥—è—â–∏–µ: <span id="verificationEmail"></span></h4>
                <div class="email-box">
                    <p><strong>–û—Ç:</strong> no-reply@tintihub.com</p>
                    <p><strong>–¢–µ–º–∞:</strong> –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
                    <hr style="margin: 10px 0; border-color: var(--border);">
                    <p>–ü—Ä–∏–≤–µ—Ç! –°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ TintiHub!</p>
                    <p>–í–∞—à –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:</p>
                    <div class="verification-code" id="displayCode"></div>
                    <p style="font-size: 12px; color: var(--text-secondary);">
                        –ö–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 10 –º–∏–Ω—É—Ç
                    </p>
                </div>
            </div>

            <form onsubmit="verifyEmail(event)">
                <div class="form-group">
                    <label>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</label>
                    <input type="text" id="verificationCodeInput" placeholder="000000" required maxlength="6" style="text-align: center; font-size: 20px; letter-spacing: 5px;">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-check"></i> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                </button>
                <button type="button" class="btn btn-secondary" onclick="resendCode()" style="width: 100%; margin-top: 10px;">
                    <i class="fas fa-redo"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ
                </button>
            </form>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="mainApp" class="hidden">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="navbar">
            <div class="container">
                <div class="nav-left">
                    <a class="logo" onclick="showHome()">
                        <i class="fas fa-code-branch"></i>
                        TintiHub
                    </a>
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤...">
                    </div>
                </div>
                <div class="nav-right">
                    <span class="user-welcome">
                        –ü—Ä–∏–≤–µ—Ç, <strong id="currentUsername"></strong><span id="navVerifiedBadge"></span>!
                    </span>
                    <a class="nav-link" onclick="showHome()">–û–±–∑–æ—Ä</a>
                    <a class="nav-link" onclick="showMyRepos()">–ú–æ–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏</a>
                    <a class="nav-link" onclick="toggleNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge" id="notifBadge">0</span>
                    </a>
                    <a class="nav-link" onclick="openNewRepoModal()">
                        <i class="fas fa-plus"></i>
                    </a>
                    <a class="profile-pic" onclick="toggleProfile()">
                        <img id="navAvatar" src="" alt="Profile">
                    </a>
                </div>
            </div>
        </nav>

        <!-- –ü–∞–Ω–µ–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
        <div class="notifications-panel" id="notificationsPanel">
            <div id="notificationsList"></div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –ø—Ä–æ—Ñ–∏–ª—è -->
        <div class="profile-panel" id="profilePanel">
            <div class="profile-menu-item" onclick="showProfile()">
                <i class="fas fa-user"></i> –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
            </div>
            <div class="profile-menu-item" onclick="showMyRepos()">
                <i class="fas fa-folder"></i> –ú–æ–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
            </div>
            <div class="profile-menu-item" onclick="showSettings()">
                <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </div>
            <div class="profile-menu-item" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
            </div>
        </div>

        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="homePage">
            <section class="hero">
                <div class="container">
                    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ TintiHub</h1>
                    <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ö–æ—Å—Ç–∏–Ω–≥–∞ –∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
                    <div class="hero-buttons">
                        <button class="btn btn-primary" onclick="openNewRepoModal()">
                            <i class="fas fa-rocket"></i> –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
                        </button>
                        <button class="btn btn-secondary" onclick="showProfile()">
                            <i class="fas fa-user"></i> –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                        </button>
                    </div>
                </div>
            </section>

            <section class="repositories">
                <div class="container">
                    <div class="section-header">
                        <h2>–í—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏</h2>
                        <button class="btn btn-sm" onclick="openNewRepoModal()">
                            <i class="fas fa-plus"></i> –ù–æ–≤—ã–π
                        </button>
                    </div>
                    <div class="repo-grid" id="repoGrid"></div>
                </div>
            </section>

            <section class="activity">
                <div class="container">
                    <h2>–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h2>
                    <div class="activity-list" id="activityList"></div>
                </div>
            </section>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div class="profile-page" id="profilePage">
            <div class="container">
                <button class="btn btn-secondary btn-sm" onclick="showHome()">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>
                
                <div class="profile-header">
                    <img class="profile-avatar" id="profileAvatar" src="" alt="Avatar">
                    <div class="profile-info">
                        <h1 id="profileUsername"></h1>
                        <div class="verification-status" id="verificationStatus">
                            <i class="fas fa-clock"></i> –ù–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
                        </div>
                        <p class="profile-bio" id="profileBio"></p>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="repoCount">0</div>
                                <div class="stat-label">–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="commitCount">0</div>
                                <div class="stat-label">–ö–æ–º–º–∏—Ç–æ–≤</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="starCount">0</div>
                                <div class="stat-label">–ó–≤–µ–∑–¥</div>
                            </div>
                        </div>
                        <button class="btn btn-primary btn-sm" onclick="showSettings()" style="margin-top: 20px;">
                            <i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                        </button>
                    </div>
                </div>

                <div class="section-header">
                    <h2>–ú–æ–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏</h2>
                </div>
                <div class="repo-grid" id="userRepoGrid"></div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div class="settings-page" id="settingsPage">
            <div class="container">
                <button class="btn btn-secondary btn-sm" onclick="showProfile()">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>

                <h1 style="margin: 30px 0;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>

                <div class="settings-section">
                    <h3><i class="fas fa-certificate"></i> –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">
                        –ü–æ–ª—É—á–∏—Ç–µ —Å–∏–Ω—é—é –≥–∞–ª–æ—á–∫—É –∏ —Å—Ç–∞–Ω—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º!
                    </p>
                    
                    <div id="verificationSection"></div>
                </div>

                <div class="settings-section">
                    <h3>–ü—Ä–æ—Ñ–∏–ª—å</h3>
                    <form onsubmit="updateProfile(event)">
                        <div class="form-group">
                            <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                            <input type="text" id="settingsUsername" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="settingsEmail" required>
                        </div>
                        <div class="form-group">
                            <label>–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</label>
                            <textarea id="settingsBio" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                    </form>
                </div>

                <div class="settings-section">
                    <h3>–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</h3>
                    <form onsubmit="changePassword(event)">
                        <div class="form-group">
                            <label>–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                            <input type="password" id="currentPassword" required>
                        </div>
                        <div class="form-group">
                            <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                            <input type="password" id="newPassword" required minlength="6">
                        </div>
                        <div class="form-group">
                            <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                            <input type="password" id="newPasswordConfirm" required>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-key"></i> –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
                        </button>
                    </form>
                </div>

                <div class="settings-section">
                    <h3>–û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h3>
                    <button class="btn btn-danger" onclick="deleteAccount()">
                        <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                    </button>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è -->
        <div class="repo-page" id="repoPage">
            <div class="container">
                <button class="btn btn-secondary btn-sm" onclick="showHome()">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>

                <div class="repo-page-header">
                    <h1 class="repo-page-title" id="repoTitle"></h1>
                    <p class="repo-description" id="repoDesc"></p>
                    <div class="repo-actions">
                        <button class="btn btn-primary btn-sm" onclick="toggleStar()">
                            <i class="fas fa-star"></i> <span id="starText">Star</span>
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="alert('–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Ñ–æ—Ä–∫–Ω—É—Ç!')">
                            <i class="fas fa-code-branch"></i> Fork
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="cloneRepo()">
                            <i class="fas fa-download"></i> Clone
                        </button>
                    </div>
                </div>

                <div class="code-block">
                    <h3><i class="fas fa-folder-open"></i> –§–∞–π–ª—ã</h3>
                    <ul class="file-list" id="fileList"></ul>
                </div>

                <div class="commit-form">
                    <h3><i class="fas fa-code-commit"></i> –ù–æ–≤—ã–π –∫–æ–º–º–∏—Ç</h3>
                    <form onsubmit="makeCommit(event)">
                        <div class="form-group">
                            <label>–ò–º—è —Ñ–∞–π–ª–∞</label>
                            <input type="text" id="commitFileName" placeholder="index.html" required>
                        </div>
                        <div class="form-group">
                            <label>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞</label>
                            <textarea id="commitFileContent" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label>–°–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞</label>
                            <input type="text" id="commitMessage" placeholder="–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª" required>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-upload"></i> –°–¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç
                        </button>
                    </form>
                </div>

                <div class="code-block">
                    <h3><i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤</h3>
                    <div class="activity-list" id="commitHistory"></div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–æ–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è -->
        <div class="modal" id="newRepoModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</h2>
                    <button class="close-modal" onclick="closeModal('newRepoModal')">&times;</button>
                </div>
                <div class="success-message" id="repoSuccessMessage"></div>
                <form onsubmit="createRepo(event)">
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è *</label>
                        <input type="text" id="repoName" placeholder="my-awesome-project" required>
                    </div>
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="repoDescription" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–í–∏–¥–∏–º–æ—Å—Ç—å</label>
                        <select id="repoVisibility">
                            <option value="public">Public - –î–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º</option>
                            <option value="private">Private - –¢–æ–ª—å–∫–æ –¥–ª—è –≤–∞—Å</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è</label>
                        <select id="repoLanguage">
                            <option value="javascript">JavaScript</option>
                            <option value="python">Python</option>
                            <option value="typescript">TypeScript</option>
                            <option value="java">Java</option>
                            <option value="csharp">C#</option>
                            <option value="cpp">C++</option>
                            <option value="html">HTML</option>
                            <option value="css">CSS</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-check"></i> –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // ==================== –°–ò–°–¢–ï–ú–ê –•–†–ê–ù–ï–ù–ò–Ø ====================
        
        class Storage {
            static getUsers() {
                return JSON.parse(localStorage.getItem('tintihub_users') || '[]');
            }

            static saveUsers(users) {
                localStorage.setItem('tintihub_users', JSON.stringify(users));
            }

            static getCurrentUser() {
                return JSON.parse(localStorage.getItem('tintihub_current_user') || 'null');
            }

            static setCurrentUser(user) {
                localStorage.setItem('tintihub_current_user', JSON.stringify(user));
            }

            static getRepos() {
                return JSON.parse(localStorage.getItem('tintihub_repos') || '[]');
            }

            static saveRepos(repos) {
                localStorage.setItem('tintihub_repos', JSON.stringify(repos));
            }

            static getActivities() {
                return JSON.parse(localStorage.getItem('tintihub_activities') || '[]');
            }

            static saveActivities(activities) {
                localStorage.setItem('tintihub_activities', JSON.stringify(activities));
            }

            static getNotifications() {
                return JSON.parse(localStorage.getItem('tintihub_notifications') || '[]');
            }

            static saveNotifications(notifications) {
                localStorage.setItem('tintihub_notifications', JSON.stringify(notifications));
            }
        }

        // ==================== CAPTCHA ====================
        
        let mathCaptchaAnswer = 0;
        let loginSliderCompleted = false;
        let pendingRegistration = null;

        function generateMathCaptcha() {
            const num1 = Math.floor(Math.random() * 10) + 1;
            const num2 = Math.floor(Math.random() * 10) + 1;
            const operations = ['+', '-', '*'];
            const operation = operations[Math.floor(Math.random() * operations.length)];
            
            let answer;
            switch(operation) {
                case '+': answer = num1 + num2; break;
                case '-': answer = num1 - num2; break;
                case '*': answer = num1 * num2; break;
            }
            
            mathCaptchaAnswer = answer;
            document.getElementById('mathQuestion').textContent = `${num1} ${operation} ${num2} = ?`;
            document.getElementById('mathAnswer').value = '';
        }

        function initLoginSlider() {
            const slider = document.getElementById('loginSliderButton');
            const container = document.getElementById('loginSliderCaptcha');
            const text = document.getElementById('loginSliderText');
            const submitBtn = document.getElementById('loginSubmitBtn');
            
            let isDragging = false;
            let startX = 0;
            let currentX = 0;

            slider.addEventListener('mousedown', startDrag);
            slider.addEventListener('touchstart', startDrag);

            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag);

            document.addEventListener('mouseup', stopDrag);
            document.addEventListener('touchend', stopDrag);

            function startDrag(e) {
                isDragging = true;
                startX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
                slider.style.cursor = 'grabbing';
            }

            function drag(e) {
                if (!isDragging) return;
                e.preventDefault();
                
                currentX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
                let deltaX = currentX - startX;
                let maxWidth = container.offsetWidth - slider.offsetWidth;
                
                deltaX = Math.max(0, Math.min(deltaX, maxWidth));
                slider.style.left = deltaX + 'px';
                
                if (deltaX >= maxWidth * 0.95) {
                    loginSliderCompleted = true;
                    container.classList.add('completed');
                    text.textContent = '‚úì –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞';
                    submitBtn.disabled = false;
                    isDragging = false;
                }
            }

            function stopDrag() {
                if (isDragging && !loginSliderCompleted) {
                    slider.style.left = '0px';
                }
                isDragging = false;
                slider.style.cursor = 'grab';
            }
        }

        // ==================== EMAIL –í–ï–†–ò–§–ò–ö–ê–¶–ò–Ø ====================
        
        let currentVerificationCode = '';
        let verificationAttempts = 0;

        function generateVerificationCode() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }

        function sendVerificationEmail(email) {
            currentVerificationCode = generateVerificationCode();
            document.getElementById('verificationEmail').textContent = email;
            document.getElementById('displayCode').textContent = currentVerificationCode;
            document.getElementById('emailVerificationModal').classList.add('active');
            
            console.log(`üìß –ö–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è ${email}: ${currentVerificationCode}`);
        }

        function verifyEmail(event) {
            event.preventDefault();
            
            const inputCode = document.getElementById('verificationCodeInput').value;
            
            if (inputCode === currentVerificationCode) {
                if (pendingRegistration) {
                    const users = Storage.getUsers();
                    users.push(pendingRegistration);
                    Storage.saveUsers(users);
                    
                    closeModal('emailVerificationModal');
                    showAuthSuccess('‚úÖ Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω! –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ú–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É.');
                    
                    setTimeout(() => {
                        switchAuthTab('login');
                        document.getElementById('loginUsername').value = pendingRegistration.username;
                    }, 2000);
                    
                    pendingRegistration = null;
                }
            } else {
                verificationAttempts++;
                if (verificationAttempts >= 3) {
                    alert('–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–Ω–æ–≤–∞.');
                    closeModal('emailVerificationModal');
                    pendingRegistration = null;
                    verificationAttempts = 0;
                } else {
                    alert(`–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥! –û—Å—Ç–∞–ª–æ—Å—å –ø–æ–ø—ã—Ç–æ–∫: ${3 - verificationAttempts}`);
                }
            }
        }

        function resendCode() {
            currentVerificationCode = generateVerificationCode();
            document.getElementById('displayCode').textContent = currentVerificationCode;
            alert('–ù–æ–≤—ã–π –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É!');
            console.log(`üìß –ù–æ–≤—ã–π –∫–æ–¥: ${currentVerificationCode}`);
        }

        // ==================== –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –ò –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø ====================
        
        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelectorAll('.auth-tab')[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelectorAll('.auth-tab')[1].classList.add('active');
                document.getElementById('registerForm').classList.add('active');
                generateMathCaptcha();
            }
            
            hideAuthMessages();
        }

        function showAuthError(message) {
            const errorEl = document.getElementById('authError');
            errorEl.textContent = message;
            errorEl.classList.add('active');
        }

        function showAuthSuccess(message) {
            const successEl = document.getElementById('authSuccess');
            successEl.textContent = message;
            successEl.classList.add('active');
        }

        function hideAuthMessages() {
            document.getElementById('authError').classList.remove('active');
            document.getElementById('authSuccess').classList.remove('active');
        }

        function register(event) {
            event.preventDefault();
            hideAuthMessages();

            const username = document.getElementById('regUsername').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const passwordConfirm = document.getElementById('regPasswordConfirm').value;
            const mathAnswer = parseInt(document.getElementById('mathAnswer').value);

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ CAPTCHA
            if (mathAnswer !== mathCaptchaAnswer) {
                showAuthError('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å!');
                generateMathCaptcha();
                return;
            }

            if (password !== passwordConfirm) {
                showAuthError('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
                return;
            }

            const users = Storage.getUsers();
            
            if (users.find(u => u.username === username)) {
                showAuthError('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
                return;
            }

            if (users.find(u => u.email === email)) {
                showAuthError('Email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω!');
                return;
            }

            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
            pendingRegistration = {
                id: Date.now(),
                username,
                email,
                password,
                bio: '–ü—Ä–∏–≤–µ—Ç! –Ø –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å TintiHub üëã',
                createdAt: new Date().toISOString(),
                avatar: `https://ui-avatars.com/api/?name=${username}&background=7c3aed&color=fff`,
                verified: false,
                verificationRequested: false
            };

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º email —Å –∫–æ–¥–æ–º
            sendVerificationEmail(email);
            event.target.reset();
        }

        function login(event) {
            event.preventDefault();
            hideAuthMessages();

            if (!loginSliderCompleted) {
                showAuthError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≤–µ—Ä—à–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!');
                return;
            }

            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            const users = Storage.getUsers();
            const user = users.find(u => 
                (u.username === username || u.email === username) && u.password === password
            );

            if (!user) {
                showAuthError('–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å!');
                return;
            }

            Storage.setCurrentUser(user);
            initApp();
        }

        function logout() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
                Storage.setCurrentUser(null);
                document.getElementById('mainApp').classList.add('hidden');
                document.getElementById('authPage').classList.remove('hidden');
                loginSliderCompleted = false;
                location.reload();
            }
        }

        function initApp() {
            const user = Storage.getCurrentUser();
            if (!user) {
                document.getElementById('authPage').classList.remove('hidden');
                document.getElementById('mainApp').classList.add('hidden');
                return;
            }

            document.getElementById('authPage').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');

            document.getElementById('currentUsername').textContent = user.username;
            document.getElementById('navAvatar').src = user.avatar;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–∞–ª–æ—á–∫—É –µ—Å–ª–∏ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
            if (user.verified) {
                document.getElementById('navVerifiedBadge').innerHTML = '<span class="verified-badge"><i class="fas fa-check"></i></span>';
            }
            
            loadRepos();
            loadActivities();
            loadNotifications();
            createStars();
        }

        // ==================== –í–ï–†–ò–§–ò–ö–ê–¶–ò–Ø –ê–ö–ö–ê–£–ù–¢–ê ====================
        
        function requestVerification() {
            const user = Storage.getCurrentUser();
            const users = Storage.getUsers();
            const userIndex = users.findIndex(u => u.id === user.id);
            
            if (users[userIndex].verificationRequested) {
                alert('–í–∞—à–∞ –∑–∞—è–≤–∫–∞ —É–∂–µ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏! –û–±—ã—á–Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 1-2 –¥–Ω—è.');
                return;
            }
            
            const repoCount = Storage.getRepos().filter(r => r.owner === user.username).length;
            
            if (repoCount < 3) {
                alert(`–î–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å –º–∏–Ω–∏–º—É–º 3 –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. –£ –≤–∞—Å: ${repoCount}`);
                return;
            }
            
            users[userIndex].verificationRequested = true;
            users[userIndex].verificationRequestDate = new Date().toISOString();
            Storage.saveUsers(users);
            Storage.setCurrentUser(users[userIndex]);
            
            addNotification('üéâ –ó–∞—è–≤–∫–∞ –Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!');
            alert('‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã –ø—Ä–æ–≤–µ—Ä–∏–º –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
            showSettings();
        }

        function instantVerify() {
            if (!confirm('üéâ –ü–æ–ª—É—á–∏—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω—É—é –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é? (–¢–æ–ª—å–∫–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)')) {
                return;
            }
            
            const user = Storage.getCurrentUser();
            const users = Storage.getUsers();
            const userIndex = users.findIndex(u => u.id === user.id);
            
            users[userIndex].verified = true;
            users[userIndex].verifiedAt = new Date().toISOString();
            Storage.saveUsers(users);
            Storage.setCurrentUser(users[userIndex]);
            
            addNotification('üéä –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–ª—É—á–∏–ª–∏ –≥–∞–ª–æ—á–∫—É –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏!');
            alert('üéä –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —Ç–µ–ø–µ—Ä—å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫!');
            
            initApp();
            showProfile();
        }

        // ==================== –ü–†–û–§–ò–õ–¨ ====================
        
        function showProfile() {
            hideAllPages();
            document.getElementById('profilePage').classList.add('active');
            closeAllPanels();

            const user = Storage.getCurrentUser();
            const repos = Storage.getRepos().filter(r => r.owner === user.username);
            const commits = repos.reduce((sum, repo) => sum + (repo.commits?.length || 0), 0);
            const stars = repos.reduce((sum, repo) => sum + (repo.stars || 0), 0);

            document.getElementById('profileAvatar').src = user.avatar;
            
            let usernameHTML = user.username;
            if (user.verified) {
                usernameHTML += '<span class="verified-badge"><i class="fas fa-check"></i></span>';
            }
            document.getElementById('profileUsername').innerHTML = usernameHTML;
            
            document.getElementById('profileBio').textContent = user.bio;
            document.getElementById('repoCount').textContent = repos.length;
            document.getElementById('commitCount').textContent = commits;
            document.getElementById('starCount').textContent = stars;

            const verificationStatus = document.getElementById('verificationStatus');
            if (user.verified) {
                verificationStatus.innerHTML = '<i class="fas fa-check-circle"></i> –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç';
                verificationStatus.classList.add('verified');
            } else if (user.verificationRequested) {
                verificationStatus.innerHTML = '<i class="fas fa-clock"></i> –ó–∞—è–≤–∫–∞ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏';
            } else {
                verificationStatus.innerHTML = '<i class="fas fa-times-circle"></i> –ù–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω';
            }

            renderUserRepos();
        }

        function renderUserRepos() {
            const user = Storage.getCurrentUser();
            const repos = Storage.getRepos().filter(r => r.owner === user.username);
            const grid = document.getElementById('userRepoGrid');
            
            if (repos.length === 0) {
                grid.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 40px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç!</p>';
                return;
            }

            grid.innerHTML = repos.map(repo => createRepoCard(repo)).join('');
        }

        // ==================== –ù–ê–°–¢–†–û–ô–ö–ò ====================
        
        function showSettings() {
            hideAllPages();
            document.getElementById('settingsPage').classList.add('active');
            closeAllPanels();

            const user = Storage.getCurrentUser();
            document.getElementById('settingsUsername').value = user.username;
            document.getElementById('settingsEmail').value = user.email;
            document.getElementById('settingsBio').value = user.bio;

            // –°–µ–∫—Ü–∏—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
            const verificationSection = document.getElementById('verificationSection');
            const repoCount = Storage.getRepos().filter(r => r.owner === user.username).length;

            if (user.verified) {
                verificationSection.innerHTML = `
                    <div class="verification-request" style="border-color: var(--success);">
                        <i class="fas fa-check-circle" style="color: var(--success); font-size: 24px;"></i>
                        <h4 style="color: var(--success); margin: 10px 0;">–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω!</h4>
                        <p style="color: var(--text-secondary); font-size: 14px;">
                            –î–∞—Ç–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏: ${new Date(user.verifiedAt).toLocaleDateString()}
                        </p>
                    </div>
                `;
            } else if (user.verificationRequested) {
                verificationSection.innerHTML = `
                    <div class="verification-request" style="border-color: var(--secondary);">
                        <i class="fas fa-clock" style="color: var(--secondary); font-size: 24px;"></i>
                        <h4 style="margin: 10px 0;">–ó–∞—è–≤–∫–∞ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</h4>
                        <p style="color: var(--text-secondary); font-size: 14px;">
                            –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞: ${new Date(user.verificationRequestDate).toLocaleDateString()}<br>
                            –û–±—ã—á–Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è.
                        </p>
                        <button class="btn btn-sm btn-primary" onclick="instantVerify()" style="margin-top: 10px;">
                            <i class="fas fa-bolt"></i> –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (DEMO)
                        </button>
                    </div>
                `;
            } else {
                verificationSection.innerHTML = `
                    <div class="info-box">
                        <i class="fas fa-info-circle"></i>
                        –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏:
                        <ul style="margin: 10px 0 10px 30px;">
                            <li>–ú–∏–Ω–∏–º—É–º 3 –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (—É –≤–∞—Å: ${repoCount})</li>
                            <li>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ</li>
                            <li>–†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã —Å –∫–æ–¥–æ–º</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary" onclick="requestVerification()" ${repoCount < 3 ? 'disabled' : ''}>
                        <i class="fas fa-certificate"></i> –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
                    </button>
                    ${repoCount >= 3 ? `
                        <button class="btn btn-secondary" onclick="instantVerify()" style="margin-top: 10px;">
                            <i class="fas fa-bolt"></i> –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (DEMO)
                        </button>
                    ` : ''}
                `;
            }
        }

        function updateProfile(event) {
            event.preventDefault();

            const user = Storage.getCurrentUser();
            const users = Storage.getUsers();
            
            const newUsername = document.getElementById('settingsUsername').value;
            const newEmail = document.getElementById('settingsEmail').value;
            const newBio = document.getElementById('settingsBio').value;

            if (newUsername !== user.username && users.find(u => u.username === newUsername)) {
                alert('–≠—Ç–æ –∏–º—è —É–∂–µ –∑–∞–Ω—è—Ç–æ!');
                return;
            }

            if (newEmail !== user.email && users.find(u => u.email === newEmail)) {
                alert('–≠—Ç–æ—Ç email —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è!');
                return;
            }

            const userIndex = users.findIndex(u => u.id === user.id);
            users[userIndex].username = newUsername;
            users[userIndex].email = newEmail;
            users[userIndex].bio = newBio;
            users[userIndex].avatar = `https://ui-avatars.com/api/?name=${newUsername}&background=7c3aed&color=fff`;

            Storage.saveUsers(users);
            Storage.setCurrentUser(users[userIndex]);

            const repos = Storage.getRepos();
            repos.forEach(repo => {
                if (repo.owner === user.username) {
                    repo.owner = newUsername;
                }
            });
            Storage.saveRepos(repos);

            alert('–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!');
            initApp();
            showProfile();
        }

        function changePassword(event) {
            event.preventDefault();

            const user = Storage.getCurrentUser();
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const newPasswordConfirm = document.getElementById('newPasswordConfirm').value;

            if (user.password !== currentPassword) {
                alert('–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å –Ω–µ–≤–µ—Ä–µ–Ω!');
                return;
            }

            if (newPassword !== newPasswordConfirm) {
                alert('–ù–æ–≤—ã–µ –ø–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
                return;
            }

            const users = Storage.getUsers();
            const userIndex = users.findIndex(u => u.id === user.id);
            users[userIndex].password = newPassword;

            Storage.saveUsers(users);
            Storage.setCurrentUser(users[userIndex]);

            alert('–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω!');
            event.target.reset();
        }

        function deleteAccount() {
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ!')) {
                return;
            }

            if (!confirm('–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å! –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
                return;
            }

            const user = Storage.getCurrentUser();
            
            let users = Storage.getUsers();
            users = users.filter(u => u.id !== user.id);
            Storage.saveUsers(users);

            let repos = Storage.getRepos();
            repos = repos.filter(r => r.owner !== user.username);
            Storage.saveRepos(repos);

            logout();
        }

        // ==================== –†–ï–ü–û–ó–ò–¢–û–†–ò–ò ====================
        
        function createRepo(event) {
            event.preventDefault();

            const user = Storage.getCurrentUser();
            const name = document.getElementById('repoName').value;
            const description = document.getElementById('repoDescription').value;
            const visibility = document.getElementById('repoVisibility').value;
            const language = document.getElementById('repoLanguage').value;

            const repos = Storage.getRepos();

            if (repos.find(r => r.name === name && r.owner === user.username)) {
                alert('–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º!');
                return;
            }

            const newRepo = {
                id: Date.now(),
                name,
                description,
                visibility,
                language,
                owner: user.username,
                ownerVerified: user.verified,
                createdAt: new Date().toISOString(),
                stars: 0,
                forks: 0,
                commits: [],
                files: [{
                    name: 'README.md',
                    content: `# ${name}\n\n${description || '–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞'}\n\n## –£—Å—Ç–∞–Ω–æ–≤–∫–∞\n\n\`\`\`bash\ngit clone https://tintihub.com/${user.username}/${name}.git\n\`\`\``,
                    createdAt: new Date().toISOString()
                }]
            };

            repos.push(newRepo);
            Storage.saveRepos(repos);

            addActivity(`–°–æ–∑–¥–∞–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π`, name);

            const msg = document.getElementById('repoSuccessMessage');
            msg.textContent = '–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!';
            msg.classList.add('active');

            event.target.reset();

            setTimeout(() => {
                closeModal('newRepoModal');
                loadRepos();
                addNotification(`–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: ${name}`);
            }, 1500);
        }

        function loadRepos() {
            const repos = Storage.getRepos();
            const grid = document.getElementById('repoGrid');
            
            if (repos.length === 0) {
                grid.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 40px; grid-column: 1/-1;">–ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π!</p>';
                return;
            }

            grid.innerHTML = repos.map(repo => createRepoCard(repo)).join('');
        }

        function createRepoCard(repo) {
            const languageColors = {
                javascript: '#3b82f6',
                python: '#a855f7',
                typescript: '#06b6d4',
                java: '#ef4444',
                csharp: '#10b981',
                cpp: '#f59e0b',
                html: '#e11d48',
                css: '#2563eb'
            };

            const user = Storage.getCurrentUser();
            const isOwner = repo.owner === user.username;
            const deleteBtn = isOwner ? `<button class="delete-btn" onclick="deleteRepo(${repo.id}, event)"><i class="fas fa-trash"></i></button>` : '';

            // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ
            const users = Storage.getUsers();
            const owner = users.find(u => u.username === repo.owner);
            const verifiedBadge = owner?.verified ? '<span class="verified-badge"><i class="fas fa-check"></i></span>' : '';

            return `
                <div class="repo-card" onclick="openRepo(${repo.id})">
                    ${deleteBtn}
                    <div class="repo-header">
                        <h3>
                            <i class="fas fa-book"></i>
                            <a href="#" onclick="event.stopPropagation(); openRepo(${repo.id})">${repo.name}</a>
                        </h3>
                        <span class="badge ${repo.visibility === 'private' ? 'badge-private' : ''}">${repo.visibility === 'public' ? 'Public' : 'Private'}</span>
                    </div>
                    <p class="repo-description">${repo.description || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è'}</p>
                    <div class="repo-stats">
                        <span><i class="fas fa-circle" style="color: ${languageColors[repo.language]}"></i> ${repo.language}</span>
                        <span><i class="fas fa-star"></i> ${repo.stars}</span>
                        <span><i class="fas fa-code-branch"></i> ${repo.forks}</span>
                        <span class="repo-owner">by ${repo.owner}${verifiedBadge}</span>
                    </div>
                </div>
            `;
        }

        function deleteRepo(repoId, event) {
            event.stopPropagation();
            
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π?')) {
                return;
            }

            let repos = Storage.getRepos();
            const repo = repos.find(r => r.id === repoId);
            repos = repos.filter(r => r.id !== repoId);
            Storage.saveRepos(repos);

            addActivity(`–£–¥–∞–ª–µ–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π`, repo.name);
            loadRepos();
        }

        function showMyRepos() {
            showHome();
            setTimeout(() => {
                const user = Storage.getCurrentUser();
                const repos = Storage.getRepos().filter(r => r.owner === user.username);
                const grid = document.getElementById('repoGrid');
                
                if (repos.length === 0) {
                    grid.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 40px; grid-column: 1/-1;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.</p>';
                } else {
                    grid.innerHTML = repos.map(repo => createRepoCard(repo)).join('');
                }
            }, 100);
        }

        // ==================== –°–¢–†–ê–ù–ò–¶–ê –†–ï–ü–û–ó–ò–¢–û–†–ò–Ø ====================
        
        let currentRepoId = null;

        function openRepo(repoId) {
            currentRepoId = repoId;
            const repos = Storage.getRepos();
            const repo = repos.find(r => r.id === repoId);

            if (!repo) {
                alert('–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω!');
                return;
            }

            hideAllPages();
            document.getElementById('repoPage').classList.add('active');
            closeAllPanels();

            document.getElementById('repoTitle').textContent = repo.name;
            document.getElementById('repoDesc').textContent = repo.description || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è';

            const fileList = document.getElementById('fileList');
            fileList.innerHTML = repo.files.map(file => `
                <li class="file-item" onclick="viewFile('${file.name}')">
                    <i class="fas fa-file-code"></i>
                    <span>${file.name}</span>
                </li>
            `).join('');

            const commitHistory = document.getElementById('commitHistory');
            if (repo.commits && repo.commits.length > 0) {
                commitHistory.innerHTML = repo.commits.map(commit => `
                    <div class="activity-item">
                        <i class="fas fa-git-alt activity-icon"></i>
                        <div class="activity-content">
                            <strong>${commit.message}</strong>
                            <div style="font-size: 12px; color: var(--text-secondary);">
                                ${commit.fileName} - ${new Date(commit.timestamp).toLocaleString()}
                            </div>
                        </div>
                    </div>
                `).join('');
            } else {
                commitHistory.innerHTML = '<p style="color: var(--text-secondary); padding: 20px;">–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–∏—Ç–æ–≤</p>';
            }

            window.scrollTo(0, 0);
        }

        function makeCommit(event) {
            event.preventDefault();

            const fileName = document.getElementById('commitFileName').value;
            const fileContent = document.getElementById('commitFileContent').value;
            const message = document.getElementById('commitMessage').value;

            const repos = Storage.getRepos();
            const repo = repos.find(r => r.id === currentRepoId);

            if (!repo) return;

            const user = Storage.getCurrentUser();
            if (repo.owner !== user.username) {
                alert('–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç—ã –≤ —á—É–∂–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π!');
                return;
            }

            const existingFileIndex = repo.files.findIndex(f => f.name === fileName);
            if (existingFileIndex >= 0) {
                repo.files[existingFileIndex].content = fileContent;
                repo.files[existingFileIndex].updatedAt = new Date().toISOString();
            } else {
                repo.files.push({
                    name: fileName,
                    content: fileContent,
                    createdAt: new Date().toISOString()
                });
            }

            if (!repo.commits) repo.commits = [];
            repo.commits.unshift({
                message,
                fileName,
                timestamp: new Date().toISOString(),
                author: user.username
            });

            Storage.saveRepos(repos);
            addActivity(`–°–¥–µ–ª–∞–ª –∫–æ–º–º–∏—Ç –≤`, repo.name);
            addNotification(`–ù–æ–≤—ã–π –∫–æ–º–º–∏—Ç –≤ ${repo.name}: ${message}`);

            event.target.reset();
            alert('–ö–æ–º–º–∏—Ç —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω!');
            openRepo(currentRepoId);
        }

        function viewFile(fileName) {
            const repos = Storage.getRepos();
            const repo = repos.find(r => r.id === currentRepoId);
            const file = repo.files.find(f => f.name === fileName);

            if (file) {
                alert(`–§–∞–π–ª: ${fileName}\n\n${file.content}`);
            }
        }

        function toggleStar() {
            const user = Storage.getCurrentUser();
            const repos = Storage.getRepos();
            const repo = repos.find(r => r.id === currentRepoId);

            if (!repo.starredBy) repo.starredBy = [];

            const index = repo.starredBy.indexOf(user.username);
            if (index >= 0) {
                repo.starredBy.splice(index, 1);
                repo.stars--;
                document.getElementById('starText').textContent = 'Star';
            } else {
                repo.starredBy.push(user.username);
                repo.stars++;
                document.getElementById('starText').textContent = 'Unstar';
                addNotification(`–í—ã –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –∑–≤–µ–∑–¥—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é ${repo.name}`);
            }

            Storage.saveRepos(repos);
            openRepo(currentRepoId);
        }

        function cloneRepo() {
            const repos = Storage.getRepos();
            const repo = repos.find(r => r.id === currentRepoId);
            const cloneUrl = `git clone https://tintihub.com/${repo.owner}/${repo.name}.git`;
            
            navigator.clipboard.writeText(cloneUrl).then(() => {
                alert('–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
            });
        }

        // ==================== –ê–ö–¢–ò–í–ù–û–°–¢–ò ====================
        
        function addActivity(action, repoName) {
            const user = Storage.getCurrentUser();
            const activities = Storage.getActivities();
            
            activities.unshift({
                user: user.username,
                userVerified: user.verified,
                action,
                repo: repoName,
                timestamp: new Date().toISOString()
            });

            if (activities.length > 50) {
                activities.pop();
            }

            Storage.saveActivities(activities);
            loadActivities();
        }

        function loadActivities() {
            const activities = Storage.getActivities();
            const list = document.getElementById('activityList');

            if (activities.length === 0) {
                list.innerHTML = '<p style="color: var(--text-secondary); padding: 20px;">–ü–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>';
                return;
            }

            const icons = {
                '–°–æ–∑–¥–∞–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π': 'fa-plus',
                '–£–¥–∞–ª–µ–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π': 'fa-trash',
                '–°–¥–µ–ª–∞–ª –∫–æ–º–º–∏—Ç –≤': 'fa-git-alt',
            };

            list.innerHTML = activities.slice(0, 10).map(activity => {
                const verifiedBadge = activity.userVerified ? '<span class="verified-badge"><i class="fas fa-check"></i></span>' : '';
                return `
                    <div class="activity-item">
                        <i class="fas ${icons[activity.action] || 'fa-star'} activity-icon"></i>
                        <div class="activity-content">
                            <strong>${activity.user}${verifiedBadge}</strong> ${activity.action} <a href="#" onclick="findAndOpenRepo('${activity.repo}')">${activity.repo}</a>
                            <span class="time">${getTimeAgo(activity.timestamp)}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function findAndOpenRepo(repoName) {
            const repos = Storage.getRepos();
            const repo = repos.find(r => r.name === repoName);
            if (repo) {
                openRepo(repo.id);
            }
        }

        // ==================== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ====================
        
        function addNotification(message) {
            const notifications = Storage.getNotifications();
            
            notifications.unshift({
                message,
                timestamp: new Date().toISOString(),
                read: false
            });

            if (notifications.length > 20) {
                notifications.pop();
            }

            Storage.saveNotifications(notifications);
            loadNotifications();
        }

        function loadNotifications() {
            const notifications = Storage.getNotifications();
            const list = document.getElementById('notificationsList');
            const badge = document.getElementById('notifBadge');

            const unread = notifications.filter(n => !n.read).length;
            badge.textContent = unread;
            badge.style.display = unread > 0 ? 'block' : 'none';

            if (notifications.length === 0) {
                list.innerHTML = '<p style="color: var(--text-secondary); padding: 20px;">–ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</p>';
                return;
            }

            list.innerHTML = notifications.slice(0, 10).map((notif, index) => `
                <div class="notification-item" onclick="markAsRead(${index})">
                    ${notif.message}
                    <div class="time">${getTimeAgo(notif.timestamp)}</div>
                </div>
            `).join('');
        }

        function markAsRead(index) {
            const notifications = Storage.getNotifications();
            notifications[index].read = true;
            Storage.saveNotifications(notifications);
            loadNotifications();
        }

        // ==================== –£–¢–ò–õ–ò–¢–´ ====================
        
        function getTimeAgo(timestamp) {
            const seconds = Math.floor((new Date() - new Date(timestamp)) / 1000);
            
            if (seconds < 60) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';
            if (seconds < 3600) return `${Math.floor(seconds / 60)} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            if (seconds < 86400) return `${Math.floor(seconds / 3600)} —á –Ω–∞–∑–∞–¥`;
            return `${Math.floor(seconds / 86400)} –¥–Ω –Ω–∞–∑–∞–¥`;
        }

        function hideAllPages() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('profilePage').classList.remove('active');
            document.getElementById('settingsPage').classList.remove('active');
            document.getElementById('repoPage').classList.remove('active');
        }

        function showHome() {
            hideAllPages();
            document.getElementById('homePage').style.display = 'block';
            closeAllPanels();
            loadRepos();
            window.scrollTo(0, 0);
        }

        function closeAllPanels() {
            document.getElementById('notificationsPanel').classList.remove('active');
            document.getElementById('profilePanel').classList.remove('active');
        }

        function toggleNotifications() {
            const panel = document.getElementById('notificationsPanel');
            const profilePanel = document.getElementById('profilePanel');
            profilePanel.classList.remove('active');
            panel.classList.toggle('active');
        }

        function toggleProfile() {
            const panel = document.getElementById('profilePanel');
            const notifPanel = document.getElementById('notificationsPanel');
            notifPanel.classList.remove('active');
            panel.classList.toggle('active');
        }

        function openNewRepoModal() {
            document.getElementById('newRepoModal').classList.add('active');
            document.getElementById('repoSuccessMessage').classList.remove('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                closeModal(e.target.id);
            }

            if (!e.target.closest('.nav-link') && !e.target.closest('.profile-pic') && 
                !e.target.closest('.notifications-panel') && !e.target.closest('.profile-panel')) {
                closeAllPanels();
            }
        });

        document.getElementById('searchInput')?.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.repo-card');
            
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                card.style.display = text.includes(searchTerm) ? 'block' : 'none';
            });
        });

        function createStars() {
            const container = document.getElementById('starsContainer');
            container.innerHTML = '';
            
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.top = Math.random() * 100 + '%';
                star.style.left = Math.random() * 100 + '%';
                star.style.animation = `twinkle ${2 + Math.random() * 3}s infinite`;
                container.appendChild(star);
            }
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        
        window.addEventListener('load', () => {
            generateMathCaptcha();
            initLoginSlider();
            initApp();
        });
    </script>
</body>
</html>